import fetch from 'node-fetch';
import fs from 'fs';

const urlRefreshToken = 'https://cab.autoinline.com/api/token/refresh/';
const headersRefreshToken = {
    'Host': 'cab.autoinline.com',
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:127.0) Gecko/20100101 Firefox/127.0',
    'Accept': 'application/json, text/plain, */*',
    'Accept-Language': 'ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3',
    'Content-Type': 'application/json;charset=utf-8',
    'Origin': 'https://lk.autoinline.com',
    'Referer': 'https://lk.autoinline.com/',
    'Connection': 'keep-alive'
};

const bodyRefreshToken = JSON.stringify({
    refresh: ""
});

const performRequest = async (lessonId) => {
    try {
        // First request to get the access token
        const responseRefreshToken = await fetch(urlRefreshToken, {
            method: 'POST',
            headers: headersRefreshToken,
            body: bodyRefreshToken
        });
        const dataRefreshToken = await responseRefreshToken.json();
        const accessToken = dataRefreshToken.access;
        console.log('Access Token:', accessToken);

        // Second request to mark video as viewed
        const urlVideoViewed = `https://cab.autoinline.com/api/lessons/${lessonId}/training-progress/?category=b`;
        const headersVideoViewed = {
            ...headersRefreshToken,
            'Authorization': `Bearer ${accessToken}`
        };
        const bodyVideoViewed = JSON.stringify({
            lesson_last_time: 2147483647,
            is_lesson_viewed: true,
            id: lessonId
        });

        
        await fetch(urlVideoViewed, {
            method: 'PATCH',
            headers: headersVideoViewed,
            body: bodyVideoViewed
        });
       
        
        console.log('Video Viewed:');

        // Pause for 3 seconds before making the third request
        await new Promise(resolve => setTimeout(resolve, 3000));

        // Third request to get the lesson credit token (credit: false)
        const urlLessonCredits = 'https://cab.autoinline.com/api/lesson_credits/';
        const headersLessonCredits = {
            ...headersVideoViewed
        };
        const bodyLessonCreditsFalse = JSON.stringify({
            lesson_id: lessonId,
            credit: false,
            category: "b"
        });

        const responseLessonCreditsFalse = await fetch(urlLessonCredits, {
            method: 'POST',
            headers: headersLessonCredits,
            body: bodyLessonCreditsFalse
        });
        const dataLessonCreditsFalse = await responseLessonCreditsFalse.json();
        const creditTokenFalse = dataLessonCreditsFalse.token; // Получаем credit_token из поля token
        console.log('Credit Token (false):', creditTokenFalse);

        // Fourth request using the credit token (credit: false)
        const urlQuestions = 'https://cab.autoinline.com/api/lesson_credits/';
        const headersQuestions = {
            ...headersLessonCredits
        };
        const bodyQuestions = JSON.stringify({
            credit_token: creditTokenFalse,
            answers: {
                "286": 885,
                "8": 20,
                "125": 385,
                "798": 2482,
                "504": 1567,
                "675": 2089,
                "374": 1170,
                "124": 383,
                "375": 1173,
                "538": 1672,
                "376": 1174,
                "736": 2287,
                "322": 1004,
                "576": 1789,
                "715": 2221,
                "618": 1912,
                "920": 2870,
                "309": 961,
                "34": 101,
                "838": 2606,
                "820": 2549,
                "185": 570,
                "378": 1180,
                "97": 299,
                "485": 1505,
                "1008": 3155,
                "506": 1574,
                "323": 1009,
                "846": 2632,
                "49": 147,
                "577": 1795,
                "54": 162,
                "619": 1916,
                "9": 23,
                "539": 1673,
                "676": 2091,
                "921": 2871,
                "505": 1569,
                "737": 2292,
                "377": 1179,
                "806": 2506,
                "578": 1796,
                "287": 887,
                "922": 2876,
                "540": 1677,
                "380": 1186,
                "10": 25,
                "127": 393,
                "50": 152,
                "381": 1191,
                "677": 2094,
                "249": 768,
                "126": 389,
                "486": 1507,
                "620": 1918,
                "1009": 3156,
                "658": 2034,
                "738": 2295,
                "379": 1184,
                "845": 2630,
                "839": 2610,
                "678": 2098,
                "923": 2881,
                "579": 1801,
                "382": 1192,
                "186": 572,
                "324": 1011,
                "98": 300,
                "716": 2222,
                "621": 1922,
                "383": 1196,
                "288": 890,
                "507": 1575,
                "128": 394,
                "384": 1198,
                "11": 29,
                "230": 708,
                "542": 1683,
                "739": 2296,
                "847": 2635,
                "310": 964,
                "129": 398,
                "325": 1015,
                "679": 2101,
                "385": 1202,
                "541": 1679,
                "740": 2299,
                "387": 1207,
                "386": 1205,
                "208": 637,
                "508": 1579,
                "924": 2882,
                "717": 2227,
                "821": 2552,
                "580": 1802,
                "622": 1925,
                "56": 169,
                "776": 2411,
                "289": 894,
                "130": 400,
                "132": 408,
                "58": 177,
                "509": 1582,
                "13": 36,
                "57": 173,
                "718": 2232,
                "680": 2106,
                "623": 1929,
                "326": 1017,
                "670": 2073,
                "109": 336,
                "311": 969,
                "582": 1809,
                "389": 1213,
                "741": 2302,
                "390": 1217,
                "581": 1806,
                "131": 403,
                "925": 2888,
                "388": 1209,
                "624": 1931,
                "840": 2613,
                "360": 1121,
                "391": 1218,
                "543": 1687,
                "392": 1223,
                "510": 1586,
                "719": 2234,
                "742": 2305,
                "681": 2109,
                "290": 898,
                "59": 179,
                "51": 154,
                "583": 1812,
                "1010": 3161,
                "393": 1225,
                "799": 2485,
                "134": 414,
                "1015": 3179,
                "187": 575,
                "277": 853,
                "584": 1815,
                "807": 2509,
                "743": 2309,
                "396": 1235,
                "83": 255,
                "511": 1590,
                "625": 1933,
                "327": 1019,
                "135": 416,
                "544": 1689,
                "487": 1512,
                "361": 1126,
                "395": 1231,
                "291": 902,
                "682": 2111,
                "777": 2414,
                "394": 1227,
                "188": 578,
                "927": 2893,
                "585": 1818,
                "110": 340,
                "683": 3562,
                "744": 2313,
                "399": 1244,
                "626": 1938,
                "328": 1022,
                "928": 2898,
                "84": 256,
                "808": 2512,
                "545": 1693,
                "488": 1514,
                "397": 1237,
                "362": 1129,
                "512": 1592,
                "36": 108,
                "136": 420,
                "292": 906,
                "137": 423,
                "398": 1239,
                "278": 858,
                "745": 2315,
                "329": 1026,
                "189": 580,
                "720": 2238,
                "513": 1594,
                "14": 38,
                "401": 1249,
                "778": 2417,
                "60": 184,
                "400": 1245,
                "293": 907,
                "586": 1821,
                "684": 2117,
                "627": 1942,
                "138": 427,
                "546": 1696,
                "929": 2902,
                "402": 1251,
                "822": 2555,
                "841": 2615,
                "587": 1823,
                "404": 1257,
                "85": 259,
                "685": 2119,
                "279": 861,
                "721": 2241,
                "746": 2319,
                "405": 1261,
                "139": 430,
                "140": 433,
                "112": 345,
                "99": 304,
                "779": 2421,
                "547": 1697,
                "403": 1254,
                "330": 1029,
                "659": 2037,
                "15": 41,
                "628": 1943,
                "331": 1031,
                "686": 2125,
                "629": 1946,
                "780": 2423,
                "408": 1271,
                "548": 1703,
                "141": 435,
                "722": 2243,
                "363": 1132,
                "294": 910,
                "588": 1827,
                "407": 1266,
                "190": 585,
                "810": 2518,
                "100": 307,
                "406": 1264,
                "52": 158,
                "930": 2904,
                "747": 2321,
                "514": 1600,
                "364": 1136,
                "589": 1830,
                "61": 187,
                "332": 1035,
                "312": 971,
                "142": 440,
                "781": 2425,
                "409": 1272,
                "410": 1277,
                "665": 2055,
                "411": 1279,
                "687": 2128,
                "630": 1948,
                "549": 1706,
                "86": 263,
                "748": 2325,
                "191": 587,
                "931": 2907,
                "515": 1601,
                "723": 2247,
                "932": 2911,
                "37": 111,
                "143": 441,
                "144": 446,
                "590": 1833,
                "631": 1952,
                "749": 2326,
                "688": 2129,
                "811": 2520,
                "489": 1517,
                "848": 2638,
                "16": 43,
                "414": 1287,
                "550": 1709,
                "516": 1604,
                "101": 311,
                "295": 915,
                "413": 1286,
                "412": 1281,
                "333": 1037,
                "416": 1293,
                "591": 1835,
                "724": 2250,
                "192": 590,
                "689": 2132,
                "313": 975,
                "17": 50,
                "87": 266,
                "145": 448,
                "782": 2431,
                "632": 1955,
                "933": 2914,
                "62": 190,
                "517": 1607,
                "415": 1292,
                "334": 1042,
                "666": 2058,
                "830": 2578,
                "551": 1711,
                "750": 2331,
                "592": 1837,
                "1007": 3152,
                "335": 1045,
                "812": 2524,
                "518": 1611,
                "417": 1297,
                "831": 2583,
                "690": 2136,
                "800": 2488,
                "280": 863,
                "751": 2333,
                "146": 450,
                "88": 269,
                "934": 2916,
                "63": 192,
                "633": 1957,
                "552": 1716,
                "193": 593,
                "725": 2253,
                "418": 1300,
                "593": 1840,
                "667": 2065,
                "691": 2140,
                "147": 455,
                "18": 51,
                "634": 1959,
                "419": 1303,
                "148": 456,
                "420": 1305,
                "113": 348,
                "281": 866,
                "38": 113,
                "519": 1613,
                "832": 2585,
                "752": 2338,
                "553": 1718,
                "726": 2256,
                "64": 195,
                "849": 2643,
                "336": 1048,
                "114": 351,
                "635": 1963,
                "102": 313,
                "65": 197,
                "753": 2341,
                "554": 1721,
                "801": 2490,
                "149": 461,
                "594": 1845,
                "151": 467,
                "692": 2143,
                "337": 1050,
                "39": 118,
                "520": 1617,
                "19": 54,
                "421": 1309,
                "423": 1314,
                "422": 1311,
                "668": 2068,
                "727": 2260,
                "426": 1323,
                "636": 1965,
                "115": 356,
                "660": 2039,
                "754": 2344,
                "20": 58,
                "669": 2069,
                "783": 2433,
                "555": 1724,
                "89": 274,
                "425": 1320,
                "728": 2263,
                "424": 1319,
                "296": 919,
                "150": 462,
                "693": 2148,
                "595": 1846,
                "338": 1053,
                "194": 597,
                "66": 200,
                "116": 357,
                "521": 1621,
                "427": 1328,
                "428": 1330,
                "637": 1969,
                "833": 2588,
                "784": 2436,
                "694": 2150,
                "90": 275,
                "755": 2347,
                "823": 2556,
                "366": 1144,
                "314": 978,
                "596": 1850,
                "152": 469,
                "297": 921,
                "490": 1520,
                "339": 1056,
                "556": 1727,
                "153": 472,
                "756": 2349,
                "522": 1624,
                "597": 1853,
                "367": 1146,
                "598": 1855,
                "67": 203,
                "785": 2440,
                "298": 926,
                "430": 1337,
                "842": 2620,
                "695": 2155,
                "340": 1060,
                "154": 474,
                "638": 1972,
                "195": 599,
                "117": 361,
                "40": 121,
                "491": 1525,
                "429": 1332,
                "431": 1339,
                "492": 1529,
                "935": 2919,
                "639": 1973,
                "786": 2443,
                "433": 1346,
                "696": 2156,
                "341": 1062,
                "432": 1342,
                "41": 123,
                "661": 2043,
                "155": 479,
                "599": 1858,
                "68": 207,
                "434": 1350,
                "557": 1729,
                "315": 981,
                "156": 480,
                "757": 2352,
                "843": 2623,
                "21": 60,
                "436": 1354,
                "69": 210,
                "342": 1064,
                "758": 2356,
                "22": 64,
                "158": 488,
                "787": 2447,
                "697": 2161,
                "435": 1351,
                "640": 1976,
                "493": 1532,
                "523": 1626,
                "558": 1732,
                "671": 2074,
                "437": 1359,
                "103": 316,
                "157": 485,
                "42": 125,
                "600": 1860,
                "118": 364,
                "43": 129,
                "439": 1366,
                "824": 2560,
                "729": 2266,
                "641": 1978,
                "440": 1368,
                "524": 1629,
                "936": 2922,
                "759": 2359,
                "196": 603,
                "788": 2448,
                "438": 1362,
                "368": 1151,
                "698": 2163,
                "601": 1863,
                "559": 1737,
                "343": 1068,
                "316": 982,
                "159": 490,
                "299": 928,
                "560": 1739,
                "642": 1981,
                "70": 212,
                "344": 1073,
                "160": 494,
                "789": 2452,
                "104": 319,
                "443": 1378,
                "730": 2269,
                "91": 280,
                "825": 2563,
                "441": 1371,
                "602": 1866,
                "442": 1375,
                "937": 2928,
                "760": 2362,
                "525": 1632,
                "699": 2168,
                "197": 604,
                "23": 66,
                "162": 499,
                "643": 1986,
                "446": 1387,
                "526": 1635,
                "603": 1869,
                "561": 1743,
                "71": 217,
                "300": 932,
                "444": 1379,
                "24": 71,
                "445": 1383,
                "494": 1534,
                "938": 2931,
                "105": 321,
                "672": 2079,
                "802": 2492,
                "700": 2170,
                "761": 2365,
                "161": 496,
                "345": 1075,
                "644": 1989,
                "448": 1391,
                "447": 1389,
                "826": 2565,
                "163": 501,
                "301": 935,
                "119": 368,
                "604": 1871,
                "449": 1393,
                "701": 2174,
                "562": 1746,
                "106": 326,
                "495": 1537,
                "850": 2645,
                "302": 938,
                "369": 1153,
                "346": 1079,
                "762": 2368,
                "527": 1639,
                "164": 506,
                "72": 221,
                "166": 514,
                "450": 1397,
                "496": 1540,
                "813": 2526,
                "165": 510,
                "763": 2370,
                "451": 1398,
                "834": 2593,
                "702": 2177,
                "605": 1873,
                "790": 2456,
                "347": 1080,
                "563": 1748,
                "528": 1642,
                "282": 870,
                "645": 1992,
                "92": 281,
                "370": 1155,
                "939": 2933,
                "497": 1545,
                "452": 1401,
                "317": 987,
                "764": 2375,
                "791": 2461,
                "703": 2181,
                "940": 2937,
                "646": 1996,
                "606": 1876,
                "198": 609,
                "529": 1644,
                "167": 516,
                "453": 1404,
                "814": 2530,
                "564": 1753,
                "454": 1409,
                "348": 1083,
                "73": 222,
                "53": 160,
                "371": 1160,
                "457": 1419,
                "25": 72,
                "74": 226,
                "169": 522,
                "607": 1879,
                "792": 2462,
                "765": 2378,
                "93": 285,
                "565": 1757,
                "349": 1088,
                "455": 1413,
                "456": 1414,
                "1013": 3173,
                "168": 518,
                "498": 1547,
                "704": 2184,
                "303": 942,
                "647": 1999,
                "673": 2083,
                "530": 1647,
                "460": 1428,
                "283": 873,
                "941": 2941,
                "766": 2379,
                "731": 2271,
                "566": 1761,
                "459": 1423,
                "608": 1882,
                "1012": 3168,
                "648": 2000,
                "350": 1092,
                "531": 1650,
                "318": 988,
                "170": 525,
                "458": 1420,
                "171": 527,
                "793": 2466,
                "705": 2185,
                "304": 944,
                "815": 2534,
                "609": 1884,
                "199": 610,
                "305": 948,
                "816": 2537,
                "463": 1438,
                "372": 1162,
                "942": 2944,
                "767": 2384,
                "803": 2496,
                "351": 1095,
                "567": 1764,
                "706": 2188,
                "462": 1434,
                "107": 330,
                "75": 228,
                "461": 1429,
                "732": 2276,
                "533": 1657,
                "649": 2005,
                "172": 529,
                "464": 1441,
                "44": 131,
                "499": 1552,
                "352": 1098,
                "817": 2538,
                "662": 2044,
                "120": 371,
                "173": 533,
                "465": 1442,
                "794": 2469,
                "707": 2194,
                "610": 1887,
                "650": 2009,
                "174": 537,
                "466": 1447,
                "768": 2387,
                "284": 876,
                "568": 1768,
                "27": 79,
                "76": 233,
                "769": 2390,
                "651": 2010,
                "500": 1554,
                "1005": 3145,
                "77": 235,
                "835": 2594,
                "200": 615,
                "28": 83,
                "569": 1769,
                "45": 135,
                "795": 2473,
                "827": 2569,
                "285": 879,
                "121": 374,
                "353": 1099,
                "467": 1449,
                "708": 2197,
                "611": 1890,
                "468": 1453,
                "175": 539,
                "770": 2392,
                "733": 2277,
                "319": 994,
                "470": 1459,
                "570": 1773,
                "177": 545,
                "469": 1455,
                "796": 2474,
                "836": 2599,
                "94": 289,
                "612": 1893,
                "828": 2572,
                "29": 87,
                "354": 1102,
                "943": 2947,
                "709": 2201,
                "176": 543,
                "306": 952,
                "534": 1659,
                "652": 2015,
                "471": 1460,
                "179": 550,
                "178": 549,
                "613": 1897,
                "797": 2479,
                "653": 2018,
                "571": 1776,
                "844": 2626,
                "320": 998,
                "30": 88,
                "501": 1558,
                "355": 1107,
                "122": 376,
                "79": 240,
                "663": 2048,
                "473": 1466,
                "710": 2204,
                "78": 238,
                "472": 1465,
                "771": 2395,
                "111": 343,
                "31": 92,
                "95": 291,
                "535": 1661,
                "772": 2397,
                "614": 1900,
                "944": 2949,
                "572": 1779,
                "476": 1477,
                "474": 1471,
                "502": 1561,
                "46": 139,
                "818": 2543,
                "356": 1108,
                "475": 1472,
                "654": 2020,
                "711": 2208,
                "201": 617,
                "80": 245,
                "180": 555,
                "655": 2024,
                "123": 380,
                "202": 620,
                "712": 2210,
                "47": 142,
                "615": 1903,
                "81": 247,
                "804": 2500,
                "478": 1484,
                "32": 95,
                "674": 2084,
                "573": 1781,
                "479": 1486,
                "108": 333,
                "181": 557,
                "357": 1111,
                "477": 1479,
                "734": 2280,
                "773": 2402,
                "664": 2052,
                "82": 251,
                "713": 2215,
                "819": 2545,
                "574": 1784,
                "536": 1666,
                "735": 2285,
                "481": 1491,
                "945": 2953,
                "48": 145,
                "482": 1495,
                "358": 1117,
                "373": 1166,
                "307": 957,
                "480": 1490,
                "183": 562,
                "656": 2027,
                "774": 2404,
                "182": 560,
                "851": 2648,
                "616": 1904,
                "657": 2031,
                "203": 624,
                "483": 1499,
                "484": 1500,
                "359": 1119,
                "537": 1669,
                "946": 2957,
                "829": 2577,
                "96": 293,
                "33": 97,
                "837": 2600,
                "775": 2407,
                "714": 2216,
                "308": 960,
                "617": 1907,
                "184": 565,
                "503": 1564,
                "575": 1788,
                "321": 1000,
                "805": 2501
              }
              
              
        });

        const responseQuestions = await fetch(urlQuestions, {
            method: 'PUT',
            headers: headersQuestions,
            body: bodyQuestions
        });
        const dataQuestions = await responseQuestions.json();
        console.log('Response from PUT request (credit: false):', dataQuestions);

        // Pause for 3 seconds before making the new third request
        await new Promise(resolve => setTimeout(resolve, 3000));

        // Third request to get the lesson credit token (credit: true)
        const bodyLessonCreditsTrue = JSON.stringify({
            lesson_id: lessonId,
            credit: true,
            category: "b"
        });

        const responseLessonCreditsTrue = await fetch(urlLessonCredits, {
            method: 'POST',
            headers: headersLessonCredits,
            body: bodyLessonCreditsTrue
        });
        const dataLessonCreditsTrue = await responseLessonCreditsTrue.json();
        const creditTokenTrue = dataLessonCreditsTrue.token; // Получаем credit_token из поля token
        console.log('Credit Token (true):', creditTokenTrue);

        // Fourth request using the credit token (credit: true)
        const bodyQuestionsTrue = JSON.stringify({
            credit_token: creditTokenTrue,
            answers: {
                "286": 885,
                "8": 20,
                "125": 385,
                "798": 2482,
                "504": 1567,
                "675": 2089,
                "374": 1170,
                "124": 383,
                "375": 1173,
                "538": 1672,
                "376": 1174,
                "736": 2287,
                "322": 1004,
                "576": 1789,
                "715": 2221,
                "618": 1912,
                "920": 2870,
                "309": 961,
                "34": 101,
                "838": 2606,
                "820": 2549,
                "185": 570,
                "378": 1180,
                "97": 299,
                "485": 1505,
                "1008": 3155,
                "506": 1574,
                "323": 1009,
                "846": 2632,
                "49": 147,
                "577": 1795,
                "54": 162,
                "619": 1916,
                "9": 23,
                "539": 1673,
                "676": 2091,
                "921": 2871,
                "505": 1569,
                "737": 2292,
                "377": 1179,
                "806": 2506,
                "578": 1796,
                "287": 887,
                "922": 2876,
                "540": 1677,
                "380": 1186,
                "10": 25,
                "127": 393,
                "50": 152,
                "381": 1191,
                "677": 2094,
                "249": 768,
                "126": 389,
                "486": 1507,
                "620": 1918,
                "1009": 3156,
                "658": 2034,
                "738": 2295,
                "379": 1184,
                "845": 2630,
                "839": 2610,
                "678": 2098,
                "923": 2881,
                "579": 1801,
                "382": 1192,
                "186": 572,
                "324": 1011,
                "98": 300,
                "716": 2222,
                "621": 1922,
                "383": 1196,
                "288": 890,
                "507": 1575,
                "128": 394,
                "384": 1198,
                "11": 29,
                "230": 708,
                "542": 1683,
                "739": 2296,
                "847": 2635,
                "310": 964,
                "129": 398,
                "325": 1015,
                "679": 2101,
                "385": 1202,
                "541": 1679,
                "740": 2299,
                "387": 1207,
                "386": 1205,
                "208": 637,
                "508": 1579,
                "924": 2882,
                "717": 2227,
                "821": 2552,
                "580": 1802,
                "622": 1925,
                "56": 169,
                "776": 2411,
                "289": 894,
                "130": 400,
                "132": 408,
                "58": 177,
                "509": 1582,
                "13": 36,
                "57": 173,
                "718": 2232,
                "680": 2106,
                "623": 1929,
                "326": 1017,
                "670": 2073,
                "109": 336,
                "311": 969,
                "582": 1809,
                "389": 1213,
                "741": 2302,
                "390": 1217,
                "581": 1806,
                "131": 403,
                "925": 2888,
                "388": 1209,
                "624": 1931,
                "840": 2613,
                "360": 1121,
                "391": 1218,
                "543": 1687,
                "392": 1223,
                "510": 1586,
                "719": 2234,
                "742": 2305,
                "681": 2109,
                "290": 898,
                "59": 179,
                "51": 154,
                "583": 1812,
                "1010": 3161,
                "393": 1225,
                "799": 2485,
                "134": 414,
                "1015": 3179,
                "187": 575,
                "277": 853,
                "584": 1815,
                "807": 2509,
                "743": 2309,
                "396": 1235,
                "83": 255,
                "511": 1590,
                "625": 1933,
                "327": 1019,
                "135": 416,
                "544": 1689,
                "487": 1512,
                "361": 1126,
                "395": 1231,
                "291": 902,
                "682": 2111,
                "777": 2414,
                "394": 1227,
                "188": 578,
                "927": 2893,
                "585": 1818,
                "110": 340,
                "683": 3562,
                "744": 2313,
                "399": 1244,
                "626": 1938,
                "328": 1022,
                "928": 2898,
                "84": 256,
                "808": 2512,
                "545": 1693,
                "488": 1514,
                "397": 1237,
                "362": 1129,
                "512": 1592,
                "36": 108,
                "136": 420,
                "292": 906,
                "137": 423,
                "398": 1239,
                "278": 858,
                "745": 2315,
                "329": 1026,
                "189": 580,
                "720": 2238,
                "513": 1594,
                "14": 38,
                "401": 1249,
                "778": 2417,
                "60": 184,
                "400": 1245,
                "293": 907,
                "586": 1821,
                "684": 2117,
                "627": 1942,
                "138": 427,
                "546": 1696,
                "929": 2902,
                "402": 1251,
                "822": 2555,
                "841": 2615,
                "587": 1823,
                "404": 1257,
                "85": 259,
                "685": 2119,
                "279": 861,
                "721": 2241,
                "746": 2319,
                "405": 1261,
                "139": 430,
                "140": 433,
                "112": 345,
                "99": 304,
                "779": 2421,
                "547": 1697,
                "403": 1254,
                "330": 1029,
                "659": 2037,
                "15": 41,
                "628": 1943,
                "331": 1031,
                "686": 2125,
                "629": 1946,
                "780": 2423,
                "408": 1271,
                "548": 1703,
                "141": 435,
                "722": 2243,
                "363": 1132,
                "294": 910,
                "588": 1827,
                "407": 1266,
                "190": 585,
                "810": 2518,
                "100": 307,
                "406": 1264,
                "52": 158,
                "930": 2904,
                "747": 2321,
                "514": 1600,
                "364": 1136,
                "589": 1830,
                "61": 187,
                "332": 1035,
                "312": 971,
                "142": 440,
                "781": 2425,
                "409": 1272,
                "410": 1277,
                "665": 2055,
                "411": 1279,
                "687": 2128,
                "630": 1948,
                "549": 1706,
                "86": 263,
                "748": 2325,
                "191": 587,
                "931": 2907,
                "515": 1601,
                "723": 2247,
                "932": 2911,
                "37": 111,
                "143": 441,
                "144": 446,
                "590": 1833,
                "631": 1952,
                "749": 2326,
                "688": 2129,
                "811": 2520,
                "489": 1517,
                "848": 2638,
                "16": 43,
                "414": 1287,
                "550": 1709,
                "516": 1604,
                "101": 311,
                "295": 915,
                "413": 1286,
                "412": 1281,
                "333": 1037,
                "416": 1293,
                "591": 1835,
                "724": 2250,
                "192": 590,
                "689": 2132,
                "313": 975,
                "17": 50,
                "87": 266,
                "145": 448,
                "782": 2431,
                "632": 1955,
                "933": 2914,
                "62": 190,
                "517": 1607,
                "415": 1292,
                "334": 1042,
                "666": 2058,
                "830": 2578,
                "551": 1711,
                "750": 2331,
                "592": 1837,
                "1007": 3152,
                "335": 1045,
                "812": 2524,
                "518": 1611,
                "417": 1297,
                "831": 2583,
                "690": 2136,
                "800": 2488,
                "280": 863,
                "751": 2333,
                "146": 450,
                "88": 269,
                "934": 2916,
                "63": 192,
                "633": 1957,
                "552": 1716,
                "193": 593,
                "725": 2253,
                "418": 1300,
                "593": 1840,
                "667": 2065,
                "691": 2140,
                "147": 455,
                "18": 51,
                "634": 1959,
                "419": 1303,
                "148": 456,
                "420": 1305,
                "113": 348,
                "281": 866,
                "38": 113,
                "519": 1613,
                "832": 2585,
                "752": 2338,
                "553": 1718,
                "726": 2256,
                "64": 195,
                "849": 2643,
                "336": 1048,
                "114": 351,
                "635": 1963,
                "102": 313,
                "65": 197,
                "753": 2341,
                "554": 1721,
                "801": 2490,
                "149": 461,
                "594": 1845,
                "151": 467,
                "692": 2143,
                "337": 1050,
                "39": 118,
                "520": 1617,
                "19": 54,
                "421": 1309,
                "423": 1314,
                "422": 1311,
                "668": 2068,
                "727": 2260,
                "426": 1323,
                "636": 1965,
                "115": 356,
                "660": 2039,
                "754": 2344,
                "20": 58,
                "669": 2069,
                "783": 2433,
                "555": 1724,
                "89": 274,
                "425": 1320,
                "728": 2263,
                "424": 1319,
                "296": 919,
                "150": 462,
                "693": 2148,
                "595": 1846,
                "338": 1053,
                "194": 597,
                "66": 200,
                "116": 357,
                "521": 1621,
                "427": 1328,
                "428": 1330,
                "637": 1969,
                "833": 2588,
                "784": 2436,
                "694": 2150,
                "90": 275,
                "755": 2347,
                "823": 2556,
                "366": 1144,
                "314": 978,
                "596": 1850,
                "152": 469,
                "297": 921,
                "490": 1520,
                "339": 1056,
                "556": 1727,
                "153": 472,
                "756": 2349,
                "522": 1624,
                "597": 1853,
                "367": 1146,
                "598": 1855,
                "67": 203,
                "785": 2440,
                "298": 926,
                "430": 1337,
                "842": 2620,
                "695": 2155,
                "340": 1060,
                "154": 474,
                "638": 1972,
                "195": 599,
                "117": 361,
                "40": 121,
                "491": 1525,
                "429": 1332,
                "431": 1339,
                "492": 1529,
                "935": 2919,
                "639": 1973,
                "786": 2443,
                "433": 1346,
                "696": 2156,
                "341": 1062,
                "432": 1342,
                "41": 123,
                "661": 2043,
                "155": 479,
                "599": 1858,
                "68": 207,
                "434": 1350,
                "557": 1729,
                "315": 981,
                "156": 480,
                "757": 2352,
                "843": 2623,
                "21": 60,
                "436": 1354,
                "69": 210,
                "342": 1064,
                "758": 2356,
                "22": 64,
                "158": 488,
                "787": 2447,
                "697": 2161,
                "435": 1351,
                "640": 1976,
                "493": 1532,
                "523": 1626,
                "558": 1732,
                "671": 2074,
                "437": 1359,
                "103": 316,
                "157": 485,
                "42": 125,
                "600": 1860,
                "118": 364,
                "43": 129,
                "439": 1366,
                "824": 2560,
                "729": 2266,
                "641": 1978,
                "440": 1368,
                "524": 1629,
                "936": 2922,
                "759": 2359,
                "196": 603,
                "788": 2448,
                "438": 1362,
                "368": 1151,
                "698": 2163,
                "601": 1863,
                "559": 1737,
                "343": 1068,
                "316": 982,
                "159": 490,
                "299": 928,
                "560": 1739,
                "642": 1981,
                "70": 212,
                "344": 1073,
                "160": 494,
                "789": 2452,
                "104": 319,
                "443": 1378,
                "730": 2269,
                "91": 280,
                "825": 2563,
                "441": 1371,
                "602": 1866,
                "442": 1375,
                "937": 2928,
                "760": 2362,
                "525": 1632,
                "699": 2168,
                "197": 604,
                "23": 66,
                "162": 499,
                "643": 1986,
                "446": 1387,
                "526": 1635,
                "603": 1869,
                "561": 1743,
                "71": 217,
                "300": 932,
                "444": 1379,
                "24": 71,
                "445": 1383,
                "494": 1534,
                "938": 2931,
                "105": 321,
                "672": 2079,
                "802": 2492,
                "700": 2170,
                "761": 2365,
                "161": 496,
                "345": 1075,
                "644": 1989,
                "448": 1391,
                "447": 1389,
                "826": 2565,
                "163": 501,
                "301": 935,
                "119": 368,
                "604": 1871,
                "449": 1393,
                "701": 2174,
                "562": 1746,
                "106": 326,
                "495": 1537,
                "850": 2645,
                "302": 938,
                "369": 1153,
                "346": 1079,
                "762": 2368,
                "527": 1639,
                "164": 506,
                "72": 221,
                "166": 514,
                "450": 1397,
                "496": 1540,
                "813": 2526,
                "165": 510,
                "763": 2370,
                "451": 1398,
                "834": 2593,
                "702": 2177,
                "605": 1873,
                "790": 2456,
                "347": 1080,
                "563": 1748,
                "528": 1642,
                "282": 870,
                "645": 1992,
                "92": 281,
                "370": 1155,
                "939": 2933,
                "497": 1545,
                "452": 1401,
                "317": 987,
                "764": 2375,
                "791": 2461,
                "703": 2181,
                "940": 2937,
                "646": 1996,
                "606": 1876,
                "198": 609,
                "529": 1644,
                "167": 516,
                "453": 1404,
                "814": 2530,
                "564": 1753,
                "454": 1409,
                "348": 1083,
                "73": 222,
                "53": 160,
                "371": 1160,
                "457": 1419,
                "25": 72,
                "74": 226,
                "169": 522,
                "607": 1879,
                "792": 2462,
                "765": 2378,
                "93": 285,
                "565": 1757,
                "349": 1088,
                "455": 1413,
                "456": 1414,
                "1013": 3173,
                "168": 518,
                "498": 1547,
                "704": 2184,
                "303": 942,
                "647": 1999,
                "673": 2083,
                "530": 1647,
                "460": 1428,
                "283": 873,
                "941": 2941,
                "766": 2379,
                "731": 2271,
                "566": 1761,
                "459": 1423,
                "608": 1882,
                "1012": 3168,
                "648": 2000,
                "350": 1092,
                "531": 1650,
                "318": 988,
                "170": 525,
                "458": 1420,
                "171": 527,
                "793": 2466,
                "705": 2185,
                "304": 944,
                "815": 2534,
                "609": 1884,
                "199": 610,
                "305": 948,
                "816": 2537,
                "463": 1438,
                "372": 1162,
                "942": 2944,
                "767": 2384,
                "803": 2496,
                "351": 1095,
                "567": 1764,
                "706": 2188,
                "462": 1434,
                "107": 330,
                "75": 228,
                "461": 1429,
                "732": 2276,
                "533": 1657,
                "649": 2005,
                "172": 529,
                "464": 1441,
                "44": 131,
                "499": 1552,
                "352": 1098,
                "817": 2538,
                "662": 2044,
                "120": 371,
                "173": 533,
                "465": 1442,
                "794": 2469,
                "707": 2194,
                "610": 1887,
                "650": 2009,
                "174": 537,
                "466": 1447,
                "768": 2387,
                "284": 876,
                "568": 1768,
                "27": 79,
                "76": 233,
                "769": 2390,
                "651": 2010,
                "500": 1554,
                "1005": 3145,
                "77": 235,
                "835": 2594,
                "200": 615,
                "28": 83,
                "569": 1769,
                "45": 135,
                "795": 2473,
                "827": 2569,
                "285": 879,
                "121": 374,
                "353": 1099,
                "467": 1449,
                "708": 2197,
                "611": 1890,
                "468": 1453,
                "175": 539,
                "770": 2392,
                "733": 2277,
                "319": 994,
                "470": 1459,
                "570": 1773,
                "177": 545,
                "469": 1455,
                "796": 2474,
                "836": 2599,
                "94": 289,
                "612": 1893,
                "828": 2572,
                "29": 87,
                "354": 1102,
                "943": 2947,
                "709": 2201,
                "176": 543,
                "306": 952,
                "534": 1659,
                "652": 2015,
                "471": 1460,
                "179": 550,
                "178": 549,
                "613": 1897,
                "797": 2479,
                "653": 2018,
                "571": 1776,
                "844": 2626,
                "320": 998,
                "30": 88,
                "501": 1558,
                "355": 1107,
                "122": 376,
                "79": 240,
                "663": 2048,
                "473": 1466,
                "710": 2204,
                "78": 238,
                "472": 1465,
                "771": 2395,
                "111": 343,
                "31": 92,
                "95": 291,
                "535": 1661,
                "772": 2397,
                "614": 1900,
                "944": 2949,
                "572": 1779,
                "476": 1477,
                "474": 1471,
                "502": 1561,
                "46": 139,
                "818": 2543,
                "356": 1108,
                "475": 1472,
                "654": 2020,
                "711": 2208,
                "201": 617,
                "80": 245,
                "180": 555,
                "655": 2024,
                "123": 380,
                "202": 620,
                "712": 2210,
                "47": 142,
                "615": 1903,
                "81": 247,
                "804": 2500,
                "478": 1484,
                "32": 95,
                "674": 2084,
                "573": 1781,
                "479": 1486,
                "108": 333,
                "181": 557,
                "357": 1111,
                "477": 1479,
                "734": 2280,
                "773": 2402,
                "664": 2052,
                "82": 251,
                "713": 2215,
                "819": 2545,
                "574": 1784,
                "536": 1666,
                "735": 2285,
                "481": 1491,
                "945": 2953,
                "48": 145,
                "482": 1495,
                "358": 1117,
                "373": 1166,
                "307": 957,
                "480": 1490,
                "183": 562,
                "656": 2027,
                "774": 2404,
                "182": 560,
                "851": 2648,
                "616": 1904,
                "657": 2031,
                "203": 624,
                "483": 1499,
                "484": 1500,
                "359": 1119,
                "537": 1669,
                "946": 2957,
                "829": 2577,
                "96": 293,
                "33": 97,
                "837": 2600,
                "775": 2407,
                "714": 2216,
                "308": 960,
                "617": 1907,
                "184": 565,
                "503": 1564,
                "575": 1788,
                "321": 1000,
                "805": 2501
              }
              
              
        });

        const responseQuestionsTrue = await fetch(urlQuestions, {
            method: 'PUT',
            headers: headersQuestions,
            body: bodyQuestionsTrue
        });
        const dataQuestionsTrue = await responseQuestionsTrue.json();
        console.log('Response from PUT request (credit: true):', dataQuestionsTrue);

        // Обработка данных и сохранение в файл
        fs.appendFileSync(filePath, JSON.stringify(dataQuestionsTrue) + ',');
        console.log(`Response saved to ${filePath}`);

    } catch (error) {
        console.error('Error:', error);
    }
};

const executeRequests = async () => {
    for (let lessonId = 1; lessonId <= 26; lessonId++) {
        await performRequest(lessonId);
    }
};

executeRequests();
